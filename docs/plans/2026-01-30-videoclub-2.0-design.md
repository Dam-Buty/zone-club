# VideoClub 2.0 - Design Document

**Date**: 2026-01-30
**Status**: Validated

---

## RÃˆGLES OBLIGATOIRES - PROJET 3D

**AVANT de coder:**
1. Ã‰tudier l'image de rÃ©fÃ©rence pixel par pixel
2. Rechercher l'Ã©tat de l'art (pas d'improvisation!)
3. Utiliser les outils existants (NeonTube.ts, TextureLoader, etc.)
4. VÃ©rifier visuellement CHAQUE modification

**INTERDIT:** BoÃ®tes par paresse, suppositions, marquer "complÃ©tÃ©" sans vÃ©rification visuelle.

---

## Vision

Un vidÃ©oclub virtuel immersif dans le navigateur avec une esthÃ©tique nÃ©on/synthwave annÃ©es 80. L'utilisateur navigue dans une allÃ©e de vidÃ©oclub 3D (WebGPU), interagit avec des cassettes VHS, loue et **regarde** des films via un player VHS intÃ©grÃ©, le tout accompagnÃ© d'un gÃ©rant passionnÃ© au style Tarantino.

---

## Decisions de Design

| Question | DÃ©cision |
|----------|----------|
| Navigation 3D | Mouse-only (hover pour regarder, click pour naviguer) |
| Voix du gÃ©rant | Text-only (bulles de dialogue stylisÃ©es) |
| EntrÃ©e | Entrance scene avec comptoir, puis transition vers allÃ©e |
| Animation location | Cassette sort â†’ flotte â†’ tombe dans sac papier |
| Manager AI (MVP) | Scripted responses uniquement |
| Source vidÃ©o | Self-hosted (MP4/HLS sur serveur) |
| Timer location | Real-time countdown (dÃ©marre Ã  la location) |
| Style player | VHS-themed (VCR controls, tracking, grain, scanlines) |

---

## User Journey

```
1. ARRIVAL
   Chargement â†’ Entrance scene (porte s'ouvre, comptoir, gÃ©rant salue)
   â†’ Auto-transition vers allÃ©e centrale (2-3s)

2. BROWSING
   AllÃ©e 3D â†’ Ã‰tagÃ¨res cassettes des deux cÃ´tÃ©s
   â†’ Hover cassette = glow + pull-out lÃ©ger
   â†’ Click labels/flÃ¨ches = changement de rayon
   â†’ GÃ©rant apparaÃ®t aprÃ¨s 30s de hover sur une jaquette

3. SELECTING
   Click cassette â†’ Animation pull-out
   â†’ Modal fiche film (poster, infos, synopsis, bouton louer)
   â†’ Suggestion du gÃ©rant si disponible

4. RENTING
   Click "Louer" â†’ CrÃ©dits dÃ©duits
   â†’ Animation cassette-dans-sac
   â†’ RÃ©action du gÃ©rant (enthousiaste ou sceptique)

5. WATCHING
   Mes Locations â†’ Click cassette louÃ©e
   â†’ Animation VHS insert â†’ Player plein Ã©cran
   â†’ Countdown visible â†’ Regarder le film
   â†’ "BE KIND REWIND" Ã  la fin

6. ENGAGEMENT
   Sonnette â†’ GÃ©rant arrive â†’ Conversation
   â†’ 3+ Ã©changes = +1 crÃ©dit bonus (1x/jour)
```

---

## Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        React Application                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  UI Layer (React)              â”‚  3D Layer (WebGPU)             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€             â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€            â”‚
â”‚  â€¢ Header                      â”‚  â€¢ Entrance Scene              â”‚
â”‚  â€¢ Film Detail Modal           â”‚  â€¢ Aisle Scene                 â”‚
â”‚  â€¢ Manager Chat Panel          â”‚  â€¢ Cassette Objects            â”‚
â”‚  â€¢ Navigation Controls         â”‚  â€¢ Post-processing             â”‚
â”‚  â€¢ VHSPlayer                   â”‚    (neon glow, VHS grain)      â”‚
â”‚  â€¢ RentalTimer                 â”‚                                â”‚
â”‚  â€¢ MesLocations                â”‚                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                         Zustand Store                           â”‚
â”‚  â€¢ user: { credits, level, badges }                             â”‚
â”‚  â€¢ rentals: [{ filmId, rentedAt, expiresAt, videoUrl }]         â”‚
â”‚  â€¢ scene: { currentAisle, selectedFilm, managerVisible }        â”‚
â”‚  â€¢ films: { byAisle: Map<genre, Film[]> }                       â”‚
â”‚  â€¢ manager: { chatHistory[], lastBonusDate }                    â”‚
â”‚  â€¢ player: { isPlaying, currentFilm, currentTime }              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                          Services                               â”‚
â”‚  â€¢ TMDBService     â€¢ ManagerService     â€¢ StorageService        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## WebGPU Scene Structure

```
WebGPU Renderer
â”œâ”€â”€ Entrance Scene
â”‚   â”œâ”€â”€ Door (animated push-open)
â”‚   â”œâ”€â”€ Counter (geometry + neon "OPEN" sign)
â”‚   â”œâ”€â”€ Manager sprite (waves)
â”‚   â””â”€â”€ Ambient (flickering lights, posters)
â”‚
â””â”€â”€ Aisle Scene
    â”œâ”€â”€ Floor (reflective tile, neon reflections)
    â”œâ”€â”€ Ceiling (fluorescent panels, hanging signs)
    â”œâ”€â”€ Left Shelf â†’ Cassettes[] (20 per shelf)
    â”œâ”€â”€ Right Shelf â†’ Cassettes[] (20 per shelf)
    â”œâ”€â”€ Aisle Labels (clickable genre signs)
    â”œâ”€â”€ Navigation Arrows
    â””â”€â”€ Manager (appears from side)
```

### Post-Processing Pipeline

```
Scene Render â†’ Bloom Pass (neon glow) â†’ VHS Pass (grain + scanlines) â†’ Output
```

---

## Le GÃ©rant - PersonnalitÃ©

**Pas un assistant. Un PASSIONNÃ‰.**

- Ne demande pas la permission, il DOIT partager
- Avis tranchÃ©s, opinions fortes
- Peut Ãªtre sceptique sur tes choix
- Style Tarantino: digressions, connexions inattendues
- Vocabulaire: "mec", "DINGUE", "c'est du PUR cinÃ©ma"

### Exemples de Ton

Sur Fight Club:
> "Fight Club. FIGHT CLUB. Tu sais que Fincher a failli tout plaquer sur ce film ? Le studio comprenait RIEN. Et c'est devenu culte. C'est beau, non ?"

Sur une hÃ©sitation:
> "Tu hÃ©sites entre The Thing et Alien ? C'est pas le mÃªme dÃ©lire DU TOUT. Carpenter c'est la parano, Scott c'est la survie. Tu veux flipper de tes potes ou flipper de toi-mÃªme ?"

AprÃ¨s une location qu'il n'aime pas:
> "Bon... c'est ton choix. Moi j'aurais pris autre chose mais... non, vas-y, regarde-le. On en reparle aprÃ¨s."

### Triggers

| Trigger | DÃ©lai | Comportement |
|---------|-------|--------------|
| HOVER_LONG | 30 secondes | DÃ©barque et commence Ã  parler |
| HESITATION | 3+ cassettes en 45s | Intervient avec avis tranchÃ© |
| GENRE_RETURN | 3Ã¨me retour mÃªme rayon | Remarque sur tes goÃ»ts |
| POST_RENTAL | 2 secondes | RÃ©action honnÃªte au film |
| BELL_CLICK | ImmÃ©diat | "Ouais ?" puis reprend le dessus |

---

## SystÃ¨me de CrÃ©dits

### Ã‰conomie (base 5 crÃ©dits)

| Action | CrÃ©dits |
|--------|---------|
| Inscription | +5 |
| Location standard (72h) | -1 |
| Location nouveautÃ© (48h) | -2 |
| Location classique (1 semaine) | -1 |
| Ã‰crire critique | +1 |
| Critique > 200 mots | +1 bonus |
| Premier Ã  critiquer | +1 + badge |
| Discussion gÃ©rant 3+ msg | +1 (1x/jour) |

### Niveaux Carte Membre

| Niveau | Locations | Avantage |
|--------|-----------|----------|
| Bronze | 0-9 | Standard |
| Argent | 10-24 | +24h sur chaque location |
| Or | 25-49 | AccÃ¨s "RÃ©serve" (films rares) |
| Platine | 50+ | NouveautÃ©s en avant-premiÃ¨re |

---

## VHS Player

### Interface VCR

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ SCANLINES OVERLAY â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ â”‚
â”‚                                                                 â”‚
â”‚                      [ VIDEO CONTENT ]                          â”‚
â”‚                                                                 â”‚
â”‚  â®  â—€â—€  â–¶ PLAY  â–¶â–¶  â­      â”€â”€â”€â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 01:23:45 / 02:01:30  â”‚
â”‚                                                                 â”‚
â”‚  ğŸ”Š â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘  VOL          â± 2j 13h 42m restants       [âœ•]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Effets VHS

| Ã‰tat | Effet |
|------|-------|
| Lecture | Grain lÃ©ger + scanlines subtiles |
| Pause | Tracking lines horizontales tremblantes |
| Rewind | Distorsion + artefacts + son VHS |
| Fast-forward | MÃªme effet, sens inverse |
| Seek | Glitch momentanÃ© |
| Fin | "BE KIND REWIND" (3 secondes) |

### Timer de Location

| Temps restant | Style |
|---------------|-------|
| > 24h | Blanc discret |
| < 24h | Orange |
| < 6h | Rouge clignotant |
| < 1h | Rouge + notification |

### ContrÃ´les Clavier

- `ESPACE` â†’ Play/Pause
- `â† / â†’` â†’ -10s / +10s
- `F` â†’ Plein Ã©cran
- `M` â†’ Mute
- `ESC` â†’ Quitter

---

## Data Flow

### Sources

```
TMDB API          â†’ Metadata, posters, backdrops
Self-hosted       â†’ /videos/{tmdb_id}.mp4
LocalStorage      â†’ user, rentals, preferences
Mock JSON         â†’ films.json, manager-responses.json
```

### Flow de Location

```
1. Click "Louer"
2. VÃ©rifier credits >= coÃ»t
3. Si OK:
   - credits -= coÃ»t
   - rentals.push({ filmId, rentedAt, expiresAt })
   - localStorage.persist()
   - Animation sac
   - RÃ©action gÃ©rant
4. Si NON:
   - Modal "Pas assez de crÃ©dits"
```

### Expiration

```
Interval 60s:
  - Parcourir rentals[]
  - Si expiresAt < now â†’ retirer + notifier
```

---

## Structure Projet

```
src/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ ui/
â”‚   â”‚   â”œâ”€â”€ Header.tsx
â”‚   â”‚   â”œâ”€â”€ Modal.tsx
â”‚   â”‚   â”œâ”€â”€ RentalTimer.tsx
â”‚   â”‚   â””â”€â”€ CreditsBadge.tsx
â”‚   â”œâ”€â”€ videoclub/
â”‚   â”‚   â”œâ”€â”€ FilmDetailModal.tsx
â”‚   â”‚   â”œâ”€â”€ RentalBag.tsx
â”‚   â”‚   â”œâ”€â”€ MesLocations.tsx
â”‚   â”‚   â””â”€â”€ NavigationControls.tsx
â”‚   â”œâ”€â”€ manager/
â”‚   â”‚   â”œâ”€â”€ ManagerAvatar.tsx
â”‚   â”‚   â”œâ”€â”€ ManagerChat.tsx
â”‚   â”‚   â”œâ”€â”€ SpeechBubble.tsx
â”‚   â”‚   â””â”€â”€ BellButton.tsx
â”‚   â””â”€â”€ player/
â”‚       â”œâ”€â”€ VHSPlayer.tsx
â”‚       â”œâ”€â”€ VHSControls.tsx
â”‚       â”œâ”€â”€ VHSEffects.tsx
â”‚       â””â”€â”€ RentalCountdown.tsx
â”œâ”€â”€ webgpu/
â”‚   â”œâ”€â”€ core/
â”‚   â”‚   â”œâ”€â”€ Renderer.ts
â”‚   â”‚   â”œâ”€â”€ Camera.ts
â”‚   â”‚   â””â”€â”€ TextureLoader.ts
â”‚   â”œâ”€â”€ shaders/
â”‚   â”‚   â”œâ”€â”€ neon.wgsl
â”‚   â”‚   â”œâ”€â”€ vhs.wgsl
â”‚   â”‚   â””â”€â”€ basic.wgsl
â”‚   â”œâ”€â”€ scenes/
â”‚   â”‚   â”œâ”€â”€ EntranceScene.ts
â”‚   â”‚   â””â”€â”€ AisleScene.ts
â”‚   â””â”€â”€ objects/
â”‚       â”œâ”€â”€ Cassette.ts
â”‚       â”œâ”€â”€ Shelf.ts
â”‚       â””â”€â”€ NeonSign.ts
â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ useWebGPU.ts
â”‚   â”œâ”€â”€ useFilmData.ts
â”‚   â”œâ”€â”€ useManagerTriggers.ts
â”‚   â”œâ”€â”€ useRentalTimer.ts
â”‚   â””â”€â”€ useVHSEffects.ts
â”œâ”€â”€ store/
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ tmdb.ts
â”‚   â”œâ”€â”€ manager.ts
â”‚   â””â”€â”€ storage.ts
â”œâ”€â”€ data/mock/
â”‚   â”œâ”€â”€ films.json
â”‚   â”œâ”€â”€ manager-responses.json
â”‚   â””â”€â”€ videos-mapping.json
â””â”€â”€ types/
    â””â”€â”€ index.ts
```

---

## Phase 1 MVP

### Must Have

- [ ] WebGPU: Entrance + Aisle scene (3 rayons, 20 cassettes/rayon)
- [ ] WebGPU: Effets neon + post-processing VHS
- [ ] Cassettes: Fetch TMDB, hover glow, click â†’ modal
- [ ] Film Detail Modal: infos + bouton louer
- [ ] CrÃ©dits: 5 initiaux, dÃ©duction, persistence localStorage
- [ ] GÃ©rant: Avatar + trigger 30s + sonnette + 10-15 films scriptÃ©s
- [ ] Player VHS: Lecture, contrÃ´les VCR, effets, timer
- [ ] Mes Locations: Liste, countdown, accÃ¨s player, expiration auto

### Phase 2 (post-MVP)

- [ ] 7 rayons complets
- [ ] SystÃ¨me critiques + gains crÃ©dits
- [ ] Badges et niveaux carte membre
- [ ] Manager AI (remplace scripted)
- [ ] Sound design complet
- [ ] Section "RÃ©serve"
- [ ] Mobile responsive

---

## Contraintes Techniques

- **WebGPU uniquement** - Pas de fallback WebGL
- **Navigateurs**: Chrome 113+, Edge 113+, Firefox Nightly (flag)
- **Performance**: 60fps sur GPU intÃ©grÃ© rÃ©cent
- **Desktop first** - Mobile en v2
- **TMDB API Key**: via `VITE_TMDB_API_KEY`

---

## Design Tokens

```css
:root {
  --neon-pink: #ff2d95;
  --neon-cyan: #00fff7;
  --neon-purple: #b026ff;
  --neon-yellow: #fff600;
  --dark-bg: #0a0a0f;
  --darker-bg: #050508;
  --card-bg: rgba(20, 20, 30, 0.8);

  --glow-pink: 0 0 10px #ff2d95, 0 0 20px #ff2d95, 0 0 40px #ff2d95;
  --glow-cyan: 0 0 10px #00fff7, 0 0 20px #00fff7, 0 0 40px #00fff7;

  --font-display: 'Orbitron', sans-serif;
  --font-body: 'Inter', sans-serif;
  --font-retro: 'VCR OSD Mono', monospace;
}
```
